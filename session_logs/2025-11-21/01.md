---
date: 2025-11-21
branch: main
task: [IMPL-task:MODEL-STABILIZATION] - Fix feature pipeline and establish CatBoost spread model baseline
---

## Wins

- Fixed `NaN` propagation in `src/features/core.py` for special teams and trench warfare features.
- Rebuilt feature caches for 2019, 2021, and 2022.
- Successfully ran walk-forward validation for the CatBoost spread model on 2023 and 2024 seasons.
- Established a new baseline RMSE of 18.57 for the CatBoost spread model.
- Updated `docs/decisions/decision_log.md` with the new baseline.

## Blockers

- The initial walk-forward validation was too slow and had to be scoped down. The full validation across all years still needs to be run.
- The `walk_forward_validation.py` script had a bug where it would not return a value to Hydra, causing the Optuna sweeper to fail. This was fixed by returning the final RMSE.
- The development environment was missing some dev dependencies (`typer`, `mkdocs`, `mkdocs-material`, `mkdocstrings`), which caused the health checks to fail. These have been installed.

## Artifacts & Links

- Decisions: `docs/decisions/decision_log.md`
- Code Health: All health checks passed after installing missing dependencies.

## Handoff

- Stopping Point: The feature pipeline is now stable, and a new baseline for the spread model has been established.
- Next Immediate Task: Run the full walk-forward validation (2019, 2021-2025) for the CatBoost spread model to get a comprehensive performance baseline.
- Known Issues: None.
- Next Session Context: The project is now in a good state to continue improving the spread model.
