---
date: 2025-09-05
branch: main
task: [IMPL-task:lint-and-validate] - Lint cleanup, exclude notebooks, and deep validation on 20-game sample
---

## Wins

- Ruff lint now clean across the repo:
  - Excluded notebooks from lint (extend-exclude: ["*.ipynb", "**/*.ipynb"], force-exclude: true).
  - Ignored E501 globally to reduce noise from long docstrings/CLIs.
  - Fixed remaining style/import issues; verified with `uv run ruff check .` → All checks passed.
- Ingested 20 advanced box scores via GameStatsIngester fallback and wrote 20 `game_stats_raw` records (year=2024).
- Ran deep validation for 2024 processed data with team_game vs advanced box score comparison on the 20-game sample; no issues reported.

## Blockers

- Weekly team stats endpoint returned empty; fallback used (per-game advanced box scores). Rate limits still constrain larger runs; continue to batch and/or schedule.
- Team naming edge cases may cause occasional team match misses in the box-score comparison (uses case-insensitive exact match).

## Artifacts & Links

- Decisions:
  - [PRD-decision:2025-09-05] Ruff lint policy: exclude notebooks; ignore E501.
  - [PRD-decision:2025-09-05-2] Box score vs team_game validation thresholds.
- KB:
  - [KB:RuffLintConfigPolicy] Lint config policy for notebooks and long lines.
  - [KB:DeepValidationThresholds] Thresholds for plays/ypp/sr comparison against advanced box scores.
- Quality Gates: See [QG:PreCommit].

## Handoff

- Stopping Point: Lint is clean; a 20-game `game_stats_raw` sample is stored for 2024; deep validation (including box-score comparison) shows no issues on the sample.
- Next Immediate Task: Expand the ingestion+validation run to a larger slice (e.g., 2024 Weeks 1–3) when rate limits allow; then generate discrepancy CSVs if any mismatches emerge at scale.
- Known Issues: API rate limiting; occasional team name mismatches in comparisons; weekly team stats endpoint may be sparse.
- Next Session Context: Use WARP.md essential commands; data root set via CFB_MODEL_DATA_ROOT; run deep validation with `PYTHONPATH=./src uv run python -m cfb_model.data.validation --year 2024 --data-type processed --deep --data-root "/path/to/data_root"`.

