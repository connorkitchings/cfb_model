# Dev Log: V2 Feature Stability Attempts

**Date**: 2025-12-08  
**Session**: 07  
**Branch**: main  
**Task**: Explore matchup_v2 regularization/pruning; finalize recommendation

## 1) Summarize Session Accomplishments

- Tested multiple variants of `matchup_v2` (elastic net, ridge alpha sweep, pruning finish/PPD, isotonic calibration) and confirmed none meet promotion gates due to multi-year instability (2021/2023 losses) despite strong 2024 ROI.
- Hardened inference with pass YPP clipping (±15) already in `generate_weekly_bets.py`; robust fallback documented; dry-run warning-free.
- Added configs for research (`conf/features/matchup_v2.yaml`, `matchup_v2_pruned.yaml`) and Elastic Net support in `V1BaselineModel` for future experiments.

## 2) Blockers and Learnings

- **Blockers**: No blocking issues; numerical warnings persist during training logs but inference is mitigated by clipping.
- **Learnings**: Adding finish/points-per-drive features boosts 2024 ROI but overfits 2021/2023; regularization and calibration do not fix cross-year stability. Champion remains `matchup_v1` for spreads/totals.

## 3) Next Steps

- Keep `matchup_v1` as champion; treat `matchup_v2` as research-only until new signal (e.g., weather bins, situational recency, opponent-strength scaling) is developed.
- If revisiting `matchup_v2`, consider entirely new feature additions rather than more regularization tweaks.

## 4) Health Checks

- `uv run ruff format .`: 3 files reformatted
- `uv run ruff check .`: ✅
- `uv run pytest -q`: ✅ 33 passed
- `uv run mkdocs build --quiet`: ✅

## Files Touched (non-exhaustive)

- `conf/features/matchup_v2.yaml`, `conf/features/matchup_v2_pruned.yaml`
- `src/models/v1_baseline.py` (Elastic Net support)
- `scripts/pipeline/generate_weekly_bets.py` (pass YPP clipping, earlier session)
- `docs/ops/weekly_pipeline.md` (robust fallback note)
