---
date: 2025-10-02
branch: main
task: [IMPL-task:2025-PREDICTIONS] - Ingest 2025 season data, cache weekly stats, generate and score weekly bets (prediction-only)
---

## Wins

- Ingested 2025 raw data (FBS): teams (136), games (879), rosters (15,583), coaches (136), betting_lines (1,182), plays (64,552 through week 5)
- Built 2025 processed artifacts via pre-aggregations (byplay, drives, team_game, team_season, team_season_adj)
- Cached point-in-time adjusted team-week features for 2025 (weeks 2–6) at processed/team_week_adj/
- Generated weekly bet reports for 2025 weeks 2–6 using 2024-trained ensemble (via models/2025 → 2024 symlink)
- Scored weeks 5–6; wrote scored CSVs
- Hardened weekly generator to tolerate SHAP explainer incompatibilities; fallback proceeds without explanations

## Blockers

- SHAP explanations fail for certain sklearn Pipelines and when feature sets differ from training; mitigated with try/except and proceed-without-explanations
- Some week 6 games are not yet final; scoring shows NaNs until results post

## Artifacts & Links

- Reports (new):
  - reports/2025/CFB_week2_bets.csv
  - reports/2025/CFB_week3_bets.csv
  - reports/2025/CFB_week4_bets.csv
  - reports/2025/CFB_week5_bets.csv
  - reports/2025/CFB_week6_bets.csv
  - reports/2025/CFB_week5_bets_scored.csv
  - reports/2025/CFB_week6_bets_scored.csv
- Data root: '/Volumes/CK SSD/Coding Projects/cfb_model'
  - raw/ (ingested 2025 season)
  - processed/byplay|drives|team_game|team_season|team_season_adj (2025)
  - processed/team_week_adj/year=2025/week=2..6
- Models:
  - models/2025 -> 2024 (symlink) to reuse prior-year ensemble without retraining
- Code changes:
  - src/cfb_model/scripts/generate_weekly_bets_clean.py — SHAP fallback (proceed without explanations if wrapper unsupported)
- Decisions updated:
  - docs/decisions/decision_log.md — 2025 prediction-only policy using 2024 models; SHAP fallback entry
- Runbook updated:
  - docs/operations/weekly_pipeline.md — section for 2025 prediction-only flow with symlink instructions

## Handoff

- Stopping Point: 2025 ingestion complete; caches built (wk 2–6); weekly reports generated (wk 2–6) and scored (wk 5–6); docs and decisions updated
- Next Immediate Task: After week 6 completes, re-run scoring for week 6 and generate week 7 report once lines and caches are available
- Known Issues: SHAP explanations omitted for now; can revisit with model-specific explainers; thresholds (6.0/6.0) could be tuned for 2025 volume
- Next Session Context: Consider generating a rolling 2025 performance summary (spread/total hit rate and ROI) and monitoring dashboard; optionally backfill week 1 if applicable

## Health Check

- Lint: ruff check: OK
- Tests: 15 passed
- Docs: mkdocs build: OK

## Commands Run (chronological excerpts)

```bash
# Ingest 2025 season (raw)
uv run python scripts/cli.py ingest-year 2025 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model' --season-type regular

# Build processed artifacts
uv run python scripts/cli.py aggregate preagg --year 2025 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model'

# Cache weekly adjusted stats (point-in-time)
uv run python scripts/cache_weekly_stats.py --year 2025 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model'

# Reuse 2024 models for 2025
ln -s 2024 models/2025

# Generate reports (examples)
uv run python src/cfb_model/scripts/generate_weekly_bets_clean.py --year 2025 --week 6 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model' --model-dir './models' --output-dir './reports' --spread-threshold 6.0 --total-threshold 6.0

# Score reports
uv run python scripts/score_weekly_picks.py --year 2025 --week 5 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model' --report-dir './reports'
uv run python scripts/score_weekly_picks.py --year 2025 --week 6 --data-root '/Volumes/CK SSD/Coding Projects/cfb_model' --report-dir './reports'

# Health checks
uv run ruff check .
uv run pytest tests/ -q
uv run mkdocs build --strict --quiet
```
