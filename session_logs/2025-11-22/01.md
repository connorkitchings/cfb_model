---
date: 2025-11-22
branch: main
task: IMPL-experiment-framework - Refactor Experiment Framework & Run Baselines
---

## Wins

- **Experiment Framework Refactor**: Successfully implemented a Hydra-based, config-driven experiment runner (`scripts/run_experiment.py`) that integrates with MLflow and local artifact management.
- **Baseline Experiments**: Executed 4 baseline experiments (`spread_catboost_baseline_v1`, `totals_catboost_baseline_v1`, `spread_catboost_recency_v1`, `totals_pace_interaction_v1`).
- **MLOps Integration**: Verified that experiments log parameters, metrics, and artifacts correctly to `artifacts/mlruns` and `artifacts/experiment_log.csv`.
- **Feature Hygiene**: Identified missing features in the cache (recency `_last_1` and interactions) which explains why variant experiments matched baselines exactly.

## Blockers

- **Missing Features**: The `processed/team_week_adj` cache lacks the specific recency and interaction features needed for the variant experiments. This requires a rebuild of the feature cache.
- **Linting Issues**: Encountered and fixed several linting errors (imports, naming) in the new runner script.

## Artifacts & Links

- **Walkthrough**: `walkthrough.md` (Summary of results)
- **Experiment Configs**: `conf/experiment/*.yaml`
- **Runner Script**: `scripts/run_experiment.py`
- **Experiment Log**: `artifacts/experiment_log.csv`

## Handoff

- **Stopping Point**: Completed the framework refactor and initial baseline runs. Documented results in `walkthrough.md`.
- **Next Immediate Task**: Rebuild the feature cache to include `_last_1` recency and interaction terms, then re-run the variant experiments.
- **Known Issues**: Variant experiments currently produce identical results to baselines due to missing features.
- **Next Session Context**: Focus on `src/features/core.py` (or `aggregate_team_season`) to ensure these features are computed and persisted, then re-run the experiments.
